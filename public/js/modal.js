!function(){function t(t){t.hasClass("uk-form-danger")&&t.removeClass("uk-form-danger").prev().removeClass("uk-text-danger").parent().next().text("")}var n=void 0,a=$("input.uk-input");$(".ss-auth").on("click",function(t){t.preventDefault(),UIkit.switcher("#auth-switch").show(+$(this).data("index")),UIkit.modal("#auth").show()}),$(".uk-switcher").on("beforeshow",function(){a.each(function(n,a){t($(a))})}),a.on("input",function(){t($(this))}),$(".auth").on("submit",".auth-form",function(t){if(t.preventDefault(),!n){var a=$(this),s=$("[uk-spinner]");n=$.ajax({url:a.attr("action"),type:"post",dataType:"json",data:a.serialize(),abortOnRetry:!0,beforeSend:function(){s.removeClass("uk-hidden")},complete:function(){n=null,s.addClass("uk-hidden")},error:function(t){if(422!==t.status)return alert("Forbidden!");$.each(t.responseJSON.errors,function(t,n){$("input[name="+t+"]").addClass("uk-form-danger").prev().addClass("uk-text-danger").parent().next().text(n)})},success:function(t){e.generalCallback(t,a,a.data("callback"))}})}});var e={form:null,generalCallback:function(t,n,a){1===t.status&&(this.form=n,e[a]())},authLogin:function(){window.location.replace("/")},authConfirm:function(){window.location.replace("/")},authRepass:function(){this.setStatusToForm("На ваш адрес выслано письмо для восстановления доступа")},authRegistration:function(){this.setStatusToForm("На ваш адрес выслано письмо с подтверждением регистрации")},setStatusToForm:function(t){this.form.html('<div><span uk-icon="mail" class="uk-text-success"></span> <span class="uk-text-middle uk-text-primary">'+t+"</span></div>")}}}();